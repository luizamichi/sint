{% extends 'sgc/base.html' %}

{% set page = 'usuarios' %}

{% block title %}{{ super() }} - Usuários{% endblock %}

{% block content %}
	<h1 class="my-3">
		<i class="fas fa-user fa-lg"></i>
		Usuários
	</h1>

	{% if not tupla %}
	<!-- Formulário de Consulta -->
	<form action="{{ url_for('sgc.usuarios') }}" method="get">
		<div class="align-items-center form-row">
			<div class="col-lg-3 col-md-6">
				<label class="sr-only" for="input-pesquisa">Pesquisa</label>
				<div class="input-group mb-2">
					<div class="input-group-prepend">
						<div class="input-group-text">
							<i class="fas fa-search"></i>
						</div>
					</div>
					<input class="form-control" id="input-pesquisa" name="pesquisa" min="1" required type="number">
					<select class="custom-select mr-sm-2" id="input-tipo" name="tipo">
						<option selected value="id">ID</option>
						<option value="nome">Nome</option>
						<option value="login">Login</option>
						<option value="email">E-mail</option>
						<option value="data">Data</option>
					</select>
				</div>
			</div>
			<div class="col-auto">
				<button class="btn btn-block btn-dark mb-2" type="submit">Procurar</button>
			</div>
			<div class="col-auto">
				<a class="btn btn-block btn-outline-dark mb-2" href="{{ url_for('sgc.inserir_usuario') }}">Cadastrar</a>
			</div>
		</div>
	</form>
	<!--/ Formulário de Consulta -->
	{% endif %}

	{% if get_flashed_messages() %}
	<div class="text-center mt-3">
		<div class="alert alert-{{ get_flashed_messages()[0] }}" role="alert">{{ get_flashed_messages()[1] }}</div>
	</div>
	{% endif %}

	{% if tuplas %}
	<!-- Tabela de Registros -->
	<table class="table table-striped">
		<caption></caption>
		<thead>
			<tr>
				<th scope="col">ID</th>
				<th scope="col">Nome</th>
				<th scope="col">Login</th>
				<th scope="col">Data - Hora</th>
				<th scope="col">Ações</th>
			</tr>
		</thead>
		<tbody>
			{% for tupla in tuplas %}
			<tr>
				<th scope="col">{{ tupla.id }}</th>
				<td>{{ tupla.nome }}</td>
				<td>{{ tupla.login }}</td>
				<td>{{ tupla.data.strftime('%d/%m/%Y - %H:%M:%S') }}</td>
				<td>
					<a class="mx-1 text-dark" href="{{ url_for('sgc.usuarios', id=tupla.id) }}" title="Visualizar"><i class="far fa-eye fa-lg"></i></a>
					<a class="mx-1 text-dark" href="{{ url_for('sgc.alterar_usuario', id=tupla.id) }}" title="Alterar"><i class="fas fa-pencil-alt fa-lg"></i></a>
					<a class="mx-1 text-dark" data-toggle="modal" data-target="#modal" href="#" id="{{ url_for('sgc.remover_usuario', id=tupla.id) }}" title="Remover"><i class="fas fa-trash-alt fa-lg"></i></a>
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<!--/ Tabela de Registros -->
	{% endif %}

	{% if tupla %}
	<!-- Visualização de Registro -->
	<h3>ID</h3>
	<p>{{ tupla.id }}</p>
	<h3>Nome</h3>
	<p>{{ tupla.nome }}</p>
	<h3>E-mail</h3>
	<p>{{ tupla.email }}</p>
	<h3>Login</h3>
	<p>{{ tupla.login }}</p>
	<h3>Senha</h3>
	<p>{{ tupla.senha }}</p>
	<h3>Permissões</h3>
	<p>{{ tupla.permissao.string }}</p>
	<h3>Data - Hora</h3>
	<p>{{ tupla.data.strftime('%d/%m/%Y - %H:%M:%S') }}</p>
	<!--/ Visualização de Registro -->
	{% elif paginas %}
		{% include 'sgc/navegador.html' %}
		{% include 'sgc/modal.html' %}
	{% endif %}

{% endblock %}